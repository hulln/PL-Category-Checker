<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Technology Category Checker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      padding: 0;
      background: #edf2f7;
      font-family: 'Roboto', sans-serif;
      color: #333;
    }
    .container {
      max-width: 700px;
      margin: 50px auto;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      padding: 30px;
    }
    h2 {
      text-align: center;
      margin-bottom: 20px;
      font-weight: 500;
      color: #2d3748;
    }
    label, p {
      color: #4a5568;
    }
    textarea {
      width: 100%;
      height: 100px;
      padding: 12px;
      font-size: 16px;
      border: 1px solid #cbd5e0;
      border-radius: 4px;
      resize: vertical;
      box-sizing: border-box;
      margin-top: 10px;
    }
    button {
      width: 100%;
      padding: 12px;
      font-size: 16px;
      font-weight: 500;
      color: #fff;
      background: #3182ce;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      margin-top: 15px;
      transition: background 0.3s ease;
    }
    button:hover {
      background: #2b6cb0;
    }
    .section {
      margin-top: 25px;
    }
    pre {
      background: #f7fafc;
      padding: 15px;
      border-radius: 4px;
      white-space: pre-wrap;
      color: #2d3748;
      margin: 0;
      cursor: pointer;
    }
    .tooltip {
      position: relative;
      display: inline-block;
    }
    .tooltip .tooltiptext {
      visibility: hidden;
      width: 80px;
      background-color: #333;
      color: #fff;
      text-align: center;
      border-radius: 4px;
      padding: 5px;
      position: absolute;
      z-index: 1;
      bottom: 150%; /* Position above the element */
      left: 50%;
      margin-left: -40px;
      opacity: 0;
      transition: opacity 0.3s;
      font-size: 12px;
    }
    .tooltip.show .tooltiptext {
      visibility: visible;
      opacity: 1;
    }
    /* "Copied" indicator styling */
    #copyIndicator {
      text-align: center;
      color: #38a169;
      font-size: 14px;
      margin-top: 10px;
      display: none;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Technology Category Checker</h2>
    <label for="inputCategories"><strong>Enter Categories (comma <em>or</em> semicolon separated)</strong></label>
    <textarea id="inputCategories" placeholder="e.g., Databases; DBMS; Developer Tools"></textarea>
    <button onclick="checkCategories()">Check</button>
    
    <div class="section">
      <h3>✅ Found (as in official list):</h3>
      <div class="tooltip">
        <pre id="found" title="Click to copy"></pre>
        <span class="tooltiptext" id="tooltip">Copied!</span>
      </div>
      <div id="copyIndicator">Copied!</div>
    </div>
    <div class="section">
      <h3>❌ Not Found:</h3>
      <pre id="notFound"></pre>
    </div>
  </div>

  <script>
    // URL to categories
    const categoryURL = 'https://gist.githubusercontent.com/rxever/cbca77a40359502ffb6c576c1e2d2204/raw/04607a983e9e8b6c8d9be1eb6be6fc244e8072a1/technology_categories.txt';
    
    let normalizedMap = new Map();

    // Fetch and map categories from the provided URL
    fetch(categoryURL)
      .then(response => response.json())
      .then(data => {
        normalizedMap = new Map(
          data.map(item => [item.trim().toLowerCase(), item.trim()])
        );
        console.log("✔️ Categories loaded.");
      })
      .catch(err => alert("❌ Could not load category list: " + err));

    // Parse user input by replacing semicolons with commas, then splitting on commas
    function parseCategories(input) {
      // Replace all semicolons with commas
      const replaced = input.replace(/;/g, ',');
      // Now split by commas
      return replaced.split(',')
        .map(c => c.trim())
        .filter(Boolean); // remove empty results
    }

    function checkCategories() {
      const inputVal = document.getElementById("inputCategories").value;
      const entries = parseCategories(inputVal);

      const found = [];
      const notFound = [];

      // Case-insensitive check
      entries.forEach(entry => {
        const lower = entry.toLowerCase();
        if (normalizedMap.has(lower)) {
          found.push(normalizedMap.get(lower)); // Keep original case from the list
        } else {
          notFound.push(entry);
        }
      });

      // Display results as semicolon-separated
      document.getElementById("found").textContent = found.length ? found.join("; ") : "(none)";
      document.getElementById("notFound").textContent = notFound.length ? notFound.join("; ") : "(none)";
    }

    // Trigger search on Enter key unless Shift+Enter is used for a newline
    document.getElementById("inputCategories").addEventListener("keydown", function(event) {
      if (event.key === "Enter" && !event.shiftKey) {
        event.preventDefault();
        checkCategories();
      }
    });

    // Copy found text to clipboard when the "Found" area is clicked
    document.getElementById("found").addEventListener("click", function() {
      const text = this.innerText;
      if (!text || text === "(none)") return;

      navigator.clipboard.writeText(text)
        .then(() => {
          // Show tooltip indicator
          const tooltip = document.getElementById("tooltip");
          tooltip.classList.add("show");
          // Show additional "Copied" indicator
          const copyIndicator = document.getElementById("copyIndicator");
          copyIndicator.style.display = "block";
          setTimeout(() => {
            tooltip.classList.remove("show");
            copyIndicator.style.display = "none";
          }, 1500);
        })
        .catch(err => console.error("Failed to copy: ", err));
    });
  </script>
</body>
</html>
